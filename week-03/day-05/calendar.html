<html>
<head>
  <meta charset="utf-8">
  <title>My Calendar</title>
    

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
 
#calmonth { 
    margin:50px auto; 
    font: 4vw "Helvetica Neue", Helvetica, Arial; 
    display:table; 
}
#grid {
    width: 100%;
border-style: solid;
border-color: blue;
}
.headtext {
  font: 2vw "Helvetica Neue", Helvetica, Arial; 
  text-align: center;
}
.rowformat{
  width:100%;
  background-color: aqua;
}
.cellformat{
  width:13%;
  height: 10%;
  text-align: center;
  border-color: navy;
  border-style: solid;
  font-size: 1.5vw
}
.cellformat:hover{
  background-color: gray;
}
.todaysdate:hover{
background-color: gray;
}
.colheadformat{
  font-family: Arial;
  font-size: 2vw;
 text-align: center;
 border-style: solid;
 border-color: navy;
}
.inactive{
  border:#C0C0C0 solid;
}
.todaysdate{
  border-color: red;
  border-style: solid;
  text-align: center;
  font-size: 2vw;
}

.hidden{
  display:none;
}
.visible{
  display:inline;
  position:absolute;
  top:10vw;
  left:25vw;
  float:left;
  border-style: solid;
  border-color: black;
  background-color: white;
  width:45vw;
  height:25vw;
}
.overallpage{
  z-index:2;
}
.textbox{
  width:40vw;
  height:12vw;
  position: relative;
  left:3vw;
  font-size: 1vw;
  font-family: Arial;
  margin-bottom: 1vw;
}
#formpage{
  font-size: 1.5vw;
}
#submitbutton{
  position:relative;
  left:30vw;
 display:inline;
  width:7vw;
  color:red;
  height:2vw;
  margin-top: 1vw;
}
#cancelbutton{
  position:relative;
  left:2vw;
  display:inline;
  width:7vw;
  color: blue;
  height: 2vw;
  margin-top: 1vw;
}
#editbutton{
  position:relative;
  left:13vw;
  width:8vw;
  height:2vw;
  color: blue;
  background-color: gray;
  top:12vw;
}
#closebutton{
  position:relative;
  left:30vw;
  width:8vw;
  height:2vw;
  color: green;
  background-color: gray;
   top:12vw;
}#removebutton{
  position:relative;
  left:-5vw;
  width:8vw;
  height: 2vw;
  color: black;
  background-color: gray;
   top:12vw;
}

.taskentry{
  position: relative;
  top :5vw;
  left:5vw;
}
.oldtext{
  margin-left: 2vw;
  margin-bottom: 0;
  font-size: 1vw;
  font-style: italic;
}
.form1{}
.form2{}

  </style>
  <script>
    
setTimeout(function () {

    var days = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]; 
    var month= "November"; 
    var dateselected="";  

    var divtop=document.createElement('div');
    divtop.setAttribute("class","overallpage");
    document.body.appendChild(divtop);

    var div1=document.createElement('header');
    div1.setAttribute("id","calMonth");
    div1.innerHTML="November 2015";
    divtop.appendChild(div1);

    var table1=document.createElement("table");
    table1.setAttribute("id","grid");
    divtop.appendChild(table1);

    var row1  = table1.insertRow(0);
    row1.setAttribute("class","rowformat");
    var row2  = table1.insertRow(1);
    row1.setAttribute("class","rowformat");
    var row3  = table1.insertRow(2);
    row1.setAttribute("class","rowformat");
    var row4  = table1.insertRow(3);
    row1.setAttribute("class","rowformat");
    var row5  = table1.insertRow(4);
    row1.setAttribute("class","rowformat");
    var row6  = table1.insertRow(5);
    row1.setAttribute("class","rowformat");
    var row7 = table1.insertRow(6);
    row1.setAttribute("class","rowformat");
    var row8 = table1.insertRow(7);
    row1.setAttribute("class","rowformat");
//day header cells
    var cell1 = row1.insertCell(0);
    cell1.setAttribute("class","colheadformat");
    var cell2 = row1.insertCell(1);
    cell2.setAttribute("class","colheadformat");
    var cell3 = row1.insertCell(2);
    cell3.setAttribute("class","colheadformat");
    var cell4 = row1.insertCell(3);
    cell4.setAttribute("class","colheadformat");
    var cell5 = row1.insertCell(4);
    cell5.setAttribute("class","colheadformat");
    var cell6 = row1.insertCell(5);
    cell6.setAttribute("class","colheadformat");
    var cell7 = row1.insertCell(6);
    cell7.setAttribute("class","colheadformat");
   
//month cells
    var cell8 = row2.insertCell(0);
    cell8.setAttribute("class","inactive");
    var cell9 = row2.insertCell(1);
    cell9.setAttribute("class","inactive");
    var cell10 = row2.insertCell(2);
    cell10.setAttribute("class","inactive");
    var cell11 = row2.insertCell(3);
    cell11.setAttribute("class","inactive");
    var cell12 = row2.insertCell(4);
    cell12.setAttribute("class","inactive");
    var cell13 = row2.insertCell(5);
    cell13.setAttribute("class","inactive");
    var cell14 = row2.insertCell(6);
    cell14.setAttribute("class","cellformat");
    cell14.setAttribute("ID","1");
    var cell15 = row3.insertCell(0);
    cell15.setAttribute("class","cellformat");
    cell15.setAttribute("ID","2");
    var cell16 = row3.insertCell(1);
    cell16.setAttribute("class","cellformat");
    cell16.setAttribute("ID","3");
    var cell17 = row3.insertCell(2);
    cell17.setAttribute("class","cellformat");
    cell17.setAttribute("ID","4");
    var cell18 = row3.insertCell(3);
    cell18.setAttribute("class","cellformat");
    cell18.setAttribute("ID","5");
    var cell19 = row3.insertCell(4);
    cell19.setAttribute("class","cellformat");
    cell19.setAttribute("ID","6");
    var cell20 = row3.insertCell(5);
    cell20.setAttribute("class","cellformat");
    cell20.setAttribute("ID","7");
    var cell21 = row3.insertCell(6);
    cell21.setAttribute("class","cellformat");
    cell21.setAttribute("ID","8");
    var cell22 = row4.insertCell(0);
    cell22.setAttribute("class","cellformat");
    cell22.setAttribute("ID","9");
    var cell23 = row4.insertCell(1);
    cell23.setAttribute("class","cellformat");
    cell23.setAttribute("ID","10");
    var cell24 = row4.insertCell(2);
    cell24.setAttribute("class","cellformat");
    cell24.setAttribute("ID","11");
    var cell25 = row4.insertCell(3);
    cell25.setAttribute("class","cellformat");
    cell25.setAttribute("ID","12");
    var cell26 = row4.insertCell(4);
    cell26.setAttribute("class","cellformat");
    cell26.setAttribute("ID","13");
    var cell27 = row4.insertCell(5);
    cell27.setAttribute("class","cellformat");
    cell27.setAttribute("ID","14");
    var cell28 = row4.insertCell(6);
    cell28.setAttribute("class","cellformat");
    cell28.setAttribute("ID","15");
    var cell29 = row5.insertCell(0);
    cell29.setAttribute("class","cellformat");
    cell29.setAttribute("ID","16");
    var cell30 = row5.insertCell(1);
    cell30.setAttribute("class","cellformat");
    cell30.setAttribute("ID","17");
    var cell31 = row5.insertCell(2);
    cell31.setAttribute("class","cellformat");
    cell31.setAttribute("ID","18");
    var cell32 = row5.insertCell(3);
    cell32.setAttribute("class","cellformat");
    cell32.setAttribute("ID","19");
    var cell33 = row5.insertCell(4);
    cell33.setAttribute("class","cellformat");
    cell33.setAttribute("ID","20");
    var cell34 = row5.insertCell(5);
    cell34.setAttribute("class","cellformat");
    cell34.setAttribute("ID","21");
    var cell35 = row5.insertCell(6);
    cell35.setAttribute("class","cellformat");
    cell35.setAttribute("ID","22");
    var cell36 = row6.insertCell(0);
    cell36.setAttribute("class","cellformat");
    cell36.setAttribute("ID","23");
    var cell37 = row6.insertCell(1);
    cell37.setAttribute("class","cellformat");
    cell37.setAttribute("ID","24");
    var cell38 = row6.insertCell(2);
    cell38.setAttribute("class","cellformat");
    cell38.setAttribute("ID","25");
    var cell39 = row6.insertCell(3);
    cell39.setAttribute("class","cellformat");
    cell39.setAttribute("ID","26");
    var cell40 = row6.insertCell(4);
    cell40.setAttribute("class","cellformat");
    cell40.setAttribute("ID","27");
    var cell41 = row6.insertCell(5);
    cell41.setAttribute("class","cellformat");
    cell41.setAttribute("ID","28");
    var cell42 = row6.insertCell(6);
    cell42.setAttribute("class","cellformat");
    cell42.setAttribute("ID","29");
    var cell43 = row7.insertCell(0);
    cell43.setAttribute("class","cellformat");
    cell43.setAttribute("ID","30");
    var cell44 = row7.insertCell(1);
    cell44.setAttribute("class","inactive");
    cell44.setAttribute("ID","31");
    var cell45 = row7.insertCell(2);
    cell45.setAttribute("class","inactive");
    cell45.setAttribute("ID","32");
    var cell46 = row7.insertCell(3);
    cell46.setAttribute("class","inactive");
    var cell47 = row7.insertCell(4);
    cell47.setAttribute("class","inactive");
    var cell48 = row7.insertCell(5);
    cell48.setAttribute("class","inactive");
    var cell49 = row7.insertCell(6);
    cell49.setAttribute("class","inactive");
    
    cell1.innerHTML = days[0];
    cell2.innerHTML = days[1];  
    cell3.innerHTML = days[2];  
    cell4.innerHTML = days[3]; 
    cell5.innerHTML = days[4]; 
    cell6.innerHTML = days[5]; 
    cell7.innerHTML = days[6]; 
    cell8.innerHTML = "";
    cell9.innerHTML = "";  
    cell10.innerHTML = "";  
    cell11.innerHTML = "";
    cell12.innerHTML = "";
    cell13.innerHTML = "";
    cell14.innerHTML = "1";
    cell15.innerHTML = "2";
    cell16.innerHTML = "3";  
    cell17.innerHTML = "4";  
    cell18.innerHTML = "5";
    cell19.innerHTML = "6";
    cell20.innerHTML = "7";
    cell21.innerHTML = "8";
    cell22.innerHTML = "9";
    cell23.innerHTML = "10";  
    cell24.innerHTML = "11";  
    cell25.innerHTML = "12";
    cell26.innerHTML = "13";
    cell27.innerHTML = "14";
    cell28.innerHTML = "15";
    cell29.innerHTML = "16";
    cell30.innerHTML = "17";  
    cell31.innerHTML = "18";  
    cell32.innerHTML = "19";
    cell33.innerHTML = "20";
    cell34.innerHTML = "21";
    cell35.innerHTML = "22";
    cell36.innerHTML = "23";
    cell37.innerHTML = "24";  
    cell38.innerHTML = "25";  
    cell39.innerHTML = "26";
    cell40.innerHTML = "27";
    cell41.innerHTML = "28";
    cell42.innerHTML = "29";
    cell43.innerHTML = "30";
    cell44.innerHTML = "";  
    cell45.innerHTML = "";  
    cell46.innerHTML = "";
    cell47.innerHTML = "";
    cell48.innerHTML = "";
    cell49.innerHTML = "";

    //var alldates=document.getElementsByClassName("cellformat");  //returns NodeList 
  
    //CREATE THE FORMS

        var formdiv=document.createElement('div');
        formdiv.setAttribute("class","hidden form1");
        formdiv.setAttribute("ID","entireDiv");

        var taskform = document.createElement('form'); 
        taskform.setAttribute("ID","formpage");
    
        var formheader=document.createElement("p");
        formheader.textContent=" placeholder";
        formheader.setAttribute("class","headtext")

        var textfield=document.createElement("textarea");
        textfield.setAttribute("form","formpage");
        textfield.setAttribute("ID","taskWords");
        textfield.setAttribute("name","textfieldname");
        textfield.setAttribute("class","textbox");

        var textentry1=document.createElement("textarea");
        textentry1.setAttribute("rows","10");
        textfield.appendChild(textentry1);
        
        var cancelfield=document.createElement("button");
        cancelfield.setAttribute("type","button");
        cancelfield.setAttribute("ID","cancelbutton")
        var txt2=document.createTextNode("CANCEL");
        cancelfield.appendChild(txt2);

        var submitfield=document.createElement("button");
        submitfield.setAttribute("ID","submitbutton")
        var txt1=document.createTextNode("SUBMIT");
        submitfield.appendChild(txt1);
        
        var linebr=document.createElement("br");
         taskform.appendChild(formheader);
        taskform.appendChild(textfield);
        taskform.appendChild(linebr);
        taskform.appendChild(linebr);
        taskform.appendChild(submitfield);
        taskform.appendChild(cancelfield);
        formdiv.appendChild(taskform);
        document.body.appendChild(formdiv);    
 
 //Second Form
        var secondformdiv=document.createElement('div');
        secondformdiv.setAttribute("class","hidden form2");
        secondformdiv.setAttribute("ID","secondFormDiv");
        var secondtaskform = document.createElement('form'); 
        secondtaskform.setAttribute("ID","secondformpage");
    
        var secondformheader=document.createElement("p");
        secondformheader.textContent=" November 2015 Task Data";
        secondformheader.setAttribute("class", "headtext");
        secondformheader.setAttribute("ID","headtext2");


        var secondtextfield=document.createElement("p");
        secondtextfield.setAttribute("class","oldtext");
        secondtextfield.setAttribute("ID","oldtextId");
        
        var closefield=document.createElement("button");
        closefield.setAttribute("type","button");
        closefield.setAttribute("ID","closebutton");
        var secondtxt1=document.createTextNode("Close");
        closefield.appendChild(secondtxt1);
        
        var editfield=document.createElement("button");
        editfield.setAttribute("type","button");
        editfield.setAttribute("ID","editbutton");
        var secondtxt2=document.createTextNode("Edit");
        
        var removefield=document.createElement("button");
        removefield.setAttribute("type","button");
        removefield.setAttribute("ID","removebutton");
        var removetxt3=document.createTextNode("Remove Task");
        
        var linebr=document.createElement("br");  
        editfield.appendChild(secondtxt2);
        removefield.appendChild(removetxt3);
    
         secondtaskform.appendChild(secondformheader);
         secondtaskform.appendChild(linebr);
        secondtaskform.appendChild(linebr);
        secondtaskform.appendChild(secondtextfield);
        secondtaskform.appendChild(linebr);
        secondtaskform.appendChild(closefield);
        secondtaskform.appendChild(editfield);
        secondtaskform.appendChild(removefield);
        secondformdiv.appendChild(secondtaskform);
        document.body.appendChild(secondformdiv);    

//find the date today
    var today = new Date().getDate();
    var alldates = document.getElementsByClassName("cellformat");
    for (var i=0; i < alldates.length;i++){
        if (alldates[i].innerHTML == today){
          var selecteddate = alldates[i];
          selecteddate.setAttribute("class","todaysdate");
      }
    }
  
  
  var taskEntries={};
//initialise object
  for (var x=0;x<31;x++){
      taskEntries[x]="";}


var picklist1=document.getElementsByClassName("overallpage");
var target1=picklist1[0];

target1.addEventListener("click", 
  function(event) {

    dateselected=event.target.textContent;
    console.log([dateselected]);
    //check if date has no entry in object choose form1 else form 2
    if (taskEntries[dateselected] === ""){
      var changeformdiv = document.getElementById("entireDiv").className="form1 visible";

      var textholder=document.getElementsByTagName("p");
      textholder[0].innerHTML=dateselected+" November 2015";

      var changedDate=document.getElementById(dateselected);
      changedDate.setAttribute("style","background-color: aqua;");
      }
    else {
//make second form visible
      var changeformdiv = document.getElementById("secondFormDiv").className="form2 visible";
     //add the header in 
     document.getElementById('headtext2').value=dateselected+" November 2015";
      //get existing task from storage
      var existing =taskEntries[dateselected];
      document.getElementById('oldtextId').textContent = existing;

      console.log("Existing value is...",existing);

  //    var textholder=document.getElementsByTagName("textarea");
      // dont know why this is here..
      
    } 
  });      

  //****SUBMIT BUTTON
var picklist4=document.getElementById("submitbutton");
picklist4.addEventListener("click", 
  function(event){
    event.preventDefault(); 
//write the results    
    var textEntered=document.getElementById("taskWords").value;  //works
    console.log("Text Entered is now...",textEntered);
    if (textEntered===""){
      alert('Hey, enter something before you submit - or press Cancel');   
    }
    taskEntries[dateselected]=textEntered;
    console.log("Taskentries are now",taskEntries);
//make the form invisible 
    var changeformdiv = document.getElementById("entireDiv").className="form1 hidden";
    if (taskEntries[dateselected] !== "") {
// if there was something entered, make sure the date with text entered is now highlighted blue.
     var changedDate=document.getElementById(dateselected);
      changedDate.setAttribute("style","background-color: aqua;");
    }
//empty the textbox
      console.log("textfieldvalue from submit button is..",textfield.value);
     textfield.value="";
// change the dateselected back to nothing
   selecteddate="";
  });  

//***** CANCEL BUTTON
  var picklist5=document.getElementById("cancelbutton");
  picklist5.addEventListener("click", 
  function(event){
    event.preventDefault();    //empty the textfield
        console.log("textfieldvalue is..",textfield.value);
        textfield.value="";
                              // hide the form
    var changeformdiv = document.getElementById("entireDiv").className="form1 hidden";  
                              //eturn the highlighting off
    if (taskEntries[dateselected] !== ""){
    var changedDate=document.getElementById(dateselected);
    changedDate.setAttribute("style","background-color: none;");
    }
  selecteddate="";
    
  });    

//** FORM2 BUTTON CLOSE
  var picklist6=document.getElementById("closebutton");
  picklist6.addEventListener("click", 
  function(event){
    event.preventDefault(); 
    event.stopPropagation;
   
    //cancel form = delete text, turn to hidden, and empty textbox
        taskEntries.dateselected="";  
        var changeformdiv = document.getElementById("secondFormDiv").className="form2 hidden";  
        var changedDate=document.getElementById(dateselected);
        changedDate.setAttribute("style","background-color: aqua;");
        selecteddate="";
  });    
//

//*****  FORM2 EDIT BUTTON

//if clicked hide this form2 and bring up form 1.
  var picklist7=document.getElementById("editbutton");
  picklist7.addEventListener("click", 
  function(event){
    event.preventDefault();
    event.stopPropagation;   //make the form2 visible
    var changeformdiv = document.getElementById("entireDiv").className="form1 visible";
                              //hide form 1
    var changeform2 = document.getElementById("secondFormDiv").className="form2 hidden";                   
  //get text from object and put into text area.
    var existing =taskEntries[dateselected];
    console.log("existing is....",existing);
      
//now where to put it?
  }); 

//*** FORM2 REMOVE BUTTON

  var picklist8=document.getElementById("removebutton");
picklist8.addEventListener("click", 
  function(event){
    event.preventDefault(); 
    event.stopPropagation;
     var changedDate=document.getElementById(dateselected);
      changedDate.setAttribute("style","background-color: none;");
    var textEntered=document.forms["formpage"].textfieldname.value;
    //cancel form - turn to hidden, and empty textbox
    textEntered="";  
    var changeformdiv = document.getElementById("formpage").className="form1 visible";  
    changeformdiv.className="form2 hidden";
  });       

 
}, 0);

  </script>
</head>
<body>

</div>
</body>
</html>